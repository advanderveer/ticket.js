!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("./src/ticket.js");b.exports=c},{"./src/ticket.js":4}],2:[function(a,b){function c(){var a=Error.apply(this,arguments);return a.name=this.name="ControllerReturnedInvalidError",this.stack=a.stack,this.message=a.message,this}function d(){var a=Error.apply(this,arguments);return a.name=this.name="ControllerTimeoutError",this.stack=a.stack,this.message=a.message,this}function e(){var a=Error.apply(this,arguments);return a.name=this.name="ControllerNotFoundError",this.stack=a.stack,this.message=a.message,this}var f=function(){};f.prototype=Error.prototype,c.prototype=new f;var f=function(){};f.prototype=Error.prototype,d.prototype=new f;var f=function(){};f.prototype=Error.prototype,e.prototype=new f,b.exports={ControllerNotFound:e,ControllerTimeout:d,ControllerReturnedInvalid:c}},{}],3:[function(a,b){var c=function(a){var b=this;b.content=a};b.exports=c},{}],4:[function(a,b){var c=(a("./transit.js"),a("./errors.js")),d=function(a,b,d,e,f){var g=this;g.context=f,g.isServer=function(){return void 0===g.context.document?!0:!1},g.handle=function(d){return new e(function(f,g){a.emit("transit.start",d);var h=d.start();d.setScope(b.getScope(d)),d.setArguments(b.getArguments(d)),d.fn===!1&&d.setFunction(b.getFunction(d)),a.emit("transit.controller",d);var i=setTimeout(function(){g(new c.ControllerTimeout('Controller for transit to url "'+d.url+'" exceeded maximum execution time of: "'+d.MAX_EXECUTION_TIME+'ms", did the controller call render?'))},d.MAX_EXECUTION_TIME),j=d.run().then(function(){clearTimeout(i);try{a.emit("transit.view",d)}catch(b){g(b)}return d.end()},g);e.all([h,j]).then(function(){try{a.emit("transit.end",d)}catch(b){g(b)}f(d.to)},g)})},g.install=function(a){return g.isServer()?g.context.use(function(b,c,d){var e=g.normalize(b,c);e.setAttribute("_res",c),e.setAttribute("_req",b),e.setAttribute("_next",d),a(g.handle(e))}):g.context.document.onclick=function(b){var c=g.normalize(b);c!==!1&&void 0!==c&&a(g.handle(c))},g},g.normalize=function(){if(g.isServer()){if(2!==arguments.length)throw new Error("[SERVER] normalize() expects 2 arguments, received: "+arguments.length);var a=arguments[0],b=arguments[1];if(void 0===a.url)throw new Error("[SERVER] normalize() expects first arguments to be an req object with an url, received: "+a);if(void 0===b.statusCode)throw new Error("[SERVER] normalize() expects second arguments to be an res object with a statusCode, received: "+a);return d.normalizeServerRequest(a,b)}var c=arguments[0];if(void 0===c||void 0===c.currentTarget)throw new Error("[CLIENT] normalize() expects argument to be an DOMEvent, received:"+c);return d.normalizeBrowserEvent(c)}};b.exports=d},{"./errors.js":2,"./transit.js":5}],5:[function(a,b){var c=(a("./state.js"),a("./errors.js")),d=function(a,b,d){var e=this,f=b.defer(),g={};e.MAX_EXECUTION_TIME=5e3,e.url=a,e.method="undefined"!=typeof d?d.toUpperCase():"GET",e.fn=!1,e.scope=e,e.arguments=[],e.result=!1,e.to=!1,e.setAttributes=function(a){g=a},e.addAttributes=function(a){Object.keys(a).forEach(function(b){g[b]=a[b]})},e.setAttribute=function(a,b){g[a]=b},e.getAttributes=function(){return g},e.getAttribute=function(a){return g[a]},e.hasAttribute=function(a){return void 0===e.getAttribute(a)?!1:!0},e.setScope=function(a){e.scope=a},e.setFunction=function(a){e.fn=a},e.setArguments=function(a){e.arguments=a},e.start=function(){var a=[];return b.all(a)},e.end=function(){if(e.to===!1)throw new c.ControllerReturnedInvalid('Transit "to" was not set from result, result is: "'+e.result+'"');var a=[];return b.all(a)},e.run=function(){var a=f.promise;if(e.to!==!1)return e.render(e.to),a;if(e.result!==!1)return e.render(e.result),a;if(!e.fn)throw new c.ControllerNotFound('Unable to find the controller for path "'+e.url+'". Maybe you forgot to add the matching route?');if(!Array.isArray(e.arguments))throw new Error('Provided controller arguments should be an Array, received "'+e.arguments+'"');if("object"!=typeof e.scope)throw new Error('Provided controller scope should be an Object, received "'+e.scope+'"');var b=e.fn.apply(e.scope,[e]);return void 0!==b&&e.render(b),a},e.render=function(a){if(f.resolve(a),e.result=a,!a)throw new Error('Did you provide a value when rendering? received: "'+a+'"');"object"==typeof a&&void 0!==a.content&&(e.to=a)}};b.exports=d},{"./errors.js":2,"./state.js":3}]},{},[1]);