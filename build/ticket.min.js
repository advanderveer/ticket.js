!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("./src/ticket.js");b.exports=c},{"./src/ticket.js":4}],2:[function(a,b){function c(){var a=Error.apply(this,arguments);return a.name=this.name="ControllerReturnedInvalidError",this.stack=a.stack,this.message=a.message,this}function d(){var a=Error.apply(this,arguments);return a.name=this.name="ControllerTimeoutError",this.stack=a.stack,this.message=a.message,this}function e(){var a=Error.apply(this,arguments);return a.name=this.name="ControllerNotFoundError",this.stack=a.stack,this.message=a.message,this}var f=function(){};f.prototype=Error.prototype,c.prototype=new f;var f=function(){};f.prototype=Error.prototype,d.prototype=new f;var f=function(){};f.prototype=Error.prototype,e.prototype=new f,b.exports={ControllerNotFound:e,ControllerTimeout:d,ControllerReturnedInvalid:c}},{}],3:[function(a,b){var c=function(a){var b=this;b.content=a};b.exports=c},{}],4:[function(a,b){var c=(a("./transit.js"),a("./errors.js")),d=function(a,b,d,e,f){var g=this;g.context=f,g.isServer=function(){return void 0===g.context.document?!0:!1},g.handle=function(a){var d=a.deferred,f=a.start();a.controller.scope=b.getScope(a),a.controller.args=b.getArguments(a),"function"!=typeof a.controller.fn&&(a.controller.fn=b.getFunction(a));var g=setTimeout(function(){d.reject(new c.ControllerTimeout('Controller for transit to url "'+a.url+'" exceeded maximum execution time of: "'+a.timeout+'ms", did the controller call render?'))},a.timeout),h=a.run().then(function(){return clearTimeout(g),a.end()},function(a){d.reject(a)});return e.all([f,h]).then(function(){d.resolve(a.to)},function(a){d.reject(a)}),d.promise},g.install=function(a){g.isServer()?g.context.use(function(b,c){var d=g.normalize(b,c);a(d,arguments),g.handle(d)}):g.context.document.onclick=function(b){var c=g.normalize(b);c!==!1&&void 0!==c&&(a(c,arguments),g.handle(c))}},g.normalize=function(){if(g.isServer()){if(2!==arguments.length)throw new Error("[SERVER] normalize() expects 2 arguments, received: "+arguments.length);var a=arguments[0],b=arguments[1];if(void 0===a.url)throw new Error("[SERVER] normalize() expects first arguments to be an req object with an url, received: "+a);if(void 0===b.statusCode)throw new Error("[SERVER] normalize() expects second arguments to be an res object with a statusCode, received: "+a);return d.normalizeServerRequest(a,b)}var c=arguments[0];if(void 0===c||void 0===c.currentTarget)throw new Error("[CLIENT] normalize() expects argument to be an DOMEvent, received:"+c);return d.normalizeBrowserEvent(c)}};b.exports=d},{"./errors.js":2,"./transit.js":5}],5:[function(a,b){var c=(a("./state.js"),a("./errors.js")),d=function(a,b){var d=this,e={},f=b.defer();d.url=a,d.timeout=5e3,d.to=!1,d.result=!1,d.deferred=b.defer(),d.controller={scope:d,args:[],fn:!1},d.start=function(){return b.all([])},d.end=function(){if(d.to===!1)throw new c.ControllerReturnedInvalid('Transit "to" state was not set from result, result is: "'+d.result+'"');return b.all([])},d.run=function(){var a=f.promise;if(d.to!==!1)return d.render(d.to),a;if(d.result!==!1)return d.render(d.result),a;if(!d.controller.fn)throw new c.ControllerNotFound('Unable to find the controller for path "'+d.url+'". Maybe you forgot to add the matching route?');if(!Array.isArray(d.controller.args))throw new Error('Provided controller arguments should be an Array, received "'+d.controller.args+'"');if("object"!=typeof d.controller.scope)throw new Error('Provided controller scope should be an Object, received "'+d.controller.scope+'"');var b=d.controller.args;b.unshift(d);var e=d.controller.fn.apply(d.controller.scope,b);return void 0!==e&&d.render(e),a},d.render=function(a){if(f.resolve(a),d.result=a,!a)throw new c.ControllerReturnedInvalid('Did you provide a value when rendering? received: "'+a+'"');"object"==typeof a&&void 0!==a.content&&(d.to=a)},d.setAttributes=function(a){e=a},d.addAttributes=function(a){Object.keys(a).forEach(function(b){e[b]=a[b]})},d.setAttribute=function(a,b){e[a]=b},d.getAttributes=function(){return e},d.getAttribute=function(a){return e[a]},d.hasAttribute=function(a){return void 0===d.getAttribute(a)?!1:!0}};b.exports=d},{"./errors.js":2,"./state.js":3}]},{},[1]);