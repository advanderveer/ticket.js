!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("./src/ticket.js");b.exports=c},{"./src/ticket.js":4}],2:[function(a,b){function c(){var a=Error.apply(this,arguments);return a.name=this.name="ControllerReturnedInvalidError",this.stack=a.stack,this.message=a.message,this}function d(){var a=Error.apply(this,arguments);return a.name=this.name="ControllerTimeoutError",this.stack=a.stack,this.message=a.message,this}function e(){var a=Error.apply(this,arguments);return a.name=this.name="ControllerNotFoundError",this.stack=a.stack,this.message=a.message,this}var f=function(){};f.prototype=Error.prototype,c.prototype=new f;var f=function(){};f.prototype=Error.prototype,d.prototype=new f;var f=function(){};f.prototype=Error.prototype,e.prototype=new f,b.exports={ControllerNotFound:e,ControllerTimeout:d,ControllerReturnedInvalid:c}},{}],3:[function(a,b){var c=function(a){var b=this;b.content=a};b.exports=c},{}],4:[function(a,b){var c=(a("./transit.js"),a("./errors.js")),d=function(a,b,d,e){var f=this;f.context=e,f.isServer=function(){return void 0===f.context.document?!0:!1},f.handle=function(b){var e=b.deferred,f=b.start();b.controller.scope=a.getScope(b),b.controller.args=a.getArguments(b),"function"!=typeof b.controller.fn&&(b.controller.fn=a.getFunction(b));var g=setTimeout(function(){e.reject(new c.ControllerTimeout('Controller for transit to url "'+b.url+'" exceeded maximum execution time of: "'+b.timeout+'ms", did the controller call render?'))},b.timeout),h=b.run().then(function(){return clearTimeout(g),b.end()},function(a){e.reject(a)});return d.all([f,h]).then(function(){b.terminate(),e.resolve(b.to)},function(a){e.reject(a)}),e.promise},f.install=function(a){var b=function(b,c){a(b,c);try{f.handle(b)}catch(d){b.deferred.reject(d)}};f.isServer()?f.context.use(function(a,c){var d=f.normalize(a,c);b(d,arguments)}):f.context.document.onclick=function(a){var c=f.normalize(a);c!==!1&&void 0!==c&&b(c,arguments)}},f.normalize=function(){if(f.isServer()){if(2!==arguments.length)throw new Error("[SERVER] normalize() expects 2 arguments, received: "+arguments.length);var a=arguments[0],c=arguments[1];if(void 0===a.url)throw new Error("[SERVER] normalize() expects first arguments to be an req object with an url, received: "+a);if(void 0===c.statusCode)throw new Error("[SERVER] normalize() expects second arguments to be an res object with a statusCode, received: "+a);return b.normalizeServerRequest(a,c)}var d=arguments[0];if(void 0===d||void 0===d.currentTarget)throw new Error("[CLIENT] normalize() expects argument to be an DOMEvent, received:"+d);return b.normalizeBrowserEvent(d)}};b.exports=d},{"./errors.js":2,"./transit.js":5}],5:[function(a,b){var c=(a("./state.js"),a("./errors.js")),d=function(a,b,d){var e=this,f={},g=b.defer();e.url=a,e.timeout=5e3,e.to=!1,e.result=!1,e.deferred=b.defer(),e.controller={scope:e,args:[],fn:!1},e.on=function(a,b){return d.once("transit."+a+"."+e.url,b),e},e.emit=function(a){var b=Array.prototype.slice.call(arguments);return b[0]="transit."+a+"."+e.url,d.emit.apply(d,b),e},e.start=function(){return e.emit("start",e),b.all([])},e.terminate=function(){e.emit("end",e)},e.end=function(){if(e.to===!1)throw new c.ControllerReturnedInvalid('Transit "to" state was not set from result, result is: "'+e.result+'"');return b.all([])},e.run=function(){e.emit("controller",e);var a=g.promise;if(e.to!==!1)return e.render(e.to),a;if(e.result!==!1)return e.render(e.result),a;if(!e.controller.fn)throw new c.ControllerNotFound('Unable to find the controller for path "'+e.url+'". Maybe you forgot to add the matching route?');if(!Array.isArray(e.controller.args))throw new Error('Provided controller arguments should be an Array, received "'+e.controller.args+'"');if("object"!=typeof e.controller.scope)throw new Error('Provided controller scope should be an Object, received "'+e.controller.scope+'"');var b=e.controller.args;b.unshift(e);var d=e.controller.fn.apply(e.controller.scope,b);return void 0!==d&&e.render(d),a},e.render=function(a){if(g.resolve(a),e.result=a,e.emit("view",e),!e.result)throw new c.ControllerReturnedInvalid('Did you provide a value when rendering? received: "'+a+'"');"object"==typeof e.result&&void 0!==e.result.content&&(e.to=e.result)},e.setAttributes=function(a){f=a},e.addAttributes=function(a){Object.keys(a).forEach(function(b){f[b]=a[b]})},e.setAttribute=function(a,b){f[a]=b},e.getAttributes=function(){return f},e.getAttribute=function(a){return f[a]},e.hasAttribute=function(a){return void 0===e.getAttribute(a)?!1:!0}};b.exports=d},{"./errors.js":2,"./state.js":3}]},{},[1]);